# Tree DP

## 작성하는 이유

프로그래머스 카카오 코딩테스트 문제를 풀었는데, 풀릴 듯 안풀렸습니다.   
도저히 못 풀겠어서 정답을 보니 처음 보는 알고리즘이었습니다. 자주 등장하는 알고리즘은 아닐 거 같지만, 재미있어 정리해봅니다.

## Tree DP란?

트리 구조에서 선택해야 할 값을 메모리제이션 된 값에서 찾아 트리 DP라고 하는 거 같습니다. DP라고 하면 앞에 값을 계산해놓고 뒤에서 앞의 값을 가져다 씁니다. 하지만 이 알고리즘은 뒤를 먼저 정의해두고 앞의 값을 사용해서 DP와 같다고 생각하면 이해하기 어려울 수 있습니다.(트리 순회를 DFS로 수행하고, 수행 결과를 메모리제이션합니다.)

## 절차

1. 트리 구조를 정의합니다. (각 노드는 연결되어 있고, 끊어진 부분이 없습니다. 어떤 부분을 잡고 루트 노드로 만들어도 트리 구조)
2. DP를 정의합니다. 2차 배열로 '[노드 개수][선택/미선택]'으로 [nodeCount][2]로 정의됩니다.
3. 어느 노드를 잡아도 트리로 만들어지니 1개의 노드를 잡고 순회를 시작합니다.(보통 1을 잡습니다)
4. 순회에 들어오면 해당 노드의 값을 [현재 노드 아이디][선택] 인덱스에 넣고, [현재 노드 아이디][미선택] 인덱스는 0으로 초기화합니다.
5. 자식 노드를 재귀합니다. 이 때 재귀를 먼저 진행하고 자식 노드의 값을 이용하여 부모 노드 값을 갱신합니다.(DP와 다른점, DFS처럼 수행)

## 코딩 테스트에서 나올 수 있는 상황

트리 구조와 인접한 노드를 선택하면 안되는 상태가 있다면 사용될 수 있습니다. 

- **최대 독립 집합 문제**: 선택된 노드들의 가중치 합이 최대가 되도록 노드들의 집합을 선택하는 문제입니다. 이 때 선택된 노드들 중 어떤 두 노드도 직접 연결되어 있지 않아야 합니다.

- **최장 경로 문제**: 트리의 두 노드를 잇는 경로들 중 가장 긴 경로의 길이

- **서브 트리 문제**: 트리의 각 노드가 어떤 값을 갖고 있을 때, 특정 조건을 만족하는 서브 트리의 최적값을 찾는 문제, 예를 들어 서브 트리 내의 노드 값의 합이 최대가 되거나, 특정 조건을 만족하는 서브트리의 개수

## 개발 시 나올만한 상황

일반적으로 시간 복잡도가 O(N)이기 때문에 트리와 데이터 또는 경우의 수가 많은 경우 사용하기 좋습니다.

- **결정 트리(decision tree)**
- **소셜 네트워크 서비스의 친구 추천 기능**: 특정 사용자에 대해 친구 추천 기능을 구현할 때, 이 사용자와 가장 가까운 관계에 있지만 아직 친구가 아닌 사용자들을 찾아내야 합니다. 여기서 트리 DP를 사용하여 친구의 친구 관계를 분석하여 추천 시스템을 최적화할 수 있습니다.

## 도움이 되었던 알고리즘 문제

- [프로그래머스 - 매출 하락 최소화](https://school.programmers.co.kr/learn/courses/30/lessons/72416): 트리 DP를 이해하기 가장 좋았던 문제
- [백준 - 트리의 독립집합](https://www.acmicpc.net/problem/2213)
- [백준 - 우수 마을](https://www.acmicpc.net/problem/1949)

트리의 독립집합과 우수 마을은 매우 비슷했습니다.